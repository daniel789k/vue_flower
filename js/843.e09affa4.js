"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[843],{3843:function(t,s,e){e.r(s),e.d(s,{default:function(){return O}});var i=e(6768),a=e(5130),o=e(4232);const l={class:"container pb-5 pt-5"},n={class:"row"},c={id:"navbar-example3",class:"navbar navbar-light bg-light flex-column align-items-stretch p-3 col-md-4 sticky-top h-100 bg-pageBack",style:{top:"56px"}},r=["href","onClick"],d=["href","onClick"],u={"data-bs-spy":"scroll","data-bs-target":"#navbar-example3","data-bs-offset":"0",tabindex:"0",class:"col-md-8"},p=["id"],h=["id"],g={class:"row row-cols-1 row-cols-md-3 g-4"},v={key:0,class:"col mb-2"},k={class:"card h-100"},m=["src"],C={class:"card-body"},f={class:"card-title"},b={key:0,class:"h5"},y={key:1,class:"h6"},L={key:2,class:"h5"},$={class:"btn-group btn-group-sm"},w=["onClick"],x=["disabled","onClick"],I={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},E=(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1),_=[E];function X(t,s,e,E,X,F){const K=(0,i.g2)("UserLoading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(K,{active:X.isLoading},null,8,["active"]),(0,i.Lk)("section",l,[(0,i.Lk)("div",n,[(0,i.Lk)("nav",c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(X.flowerType,((t,s)=>((0,i.uX)(),(0,i.CE)("nav",{class:"nav nav-pills flex-column",key:t+s},[(0,i.Lk)("a",{class:"nav-link text-dark",href:`#item-${s+1}`,onClick:(0,a.D$)((t=>F.scrollIntoView(`item-${s+1}`)),["prevent"])},(0,o.v_)(Object.keys(t)[0]),9,r),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.values(t)[0],((t,e)=>((0,i.uX)(),(0,i.CE)("nav",{class:"flex-column nav nav-pills",key:e},[(0,i.Lk)("a",{class:"nav-link ms-3 my-1 btn btn-one",href:`#item-${s+1}-${e+1}`,onClick:(0,a.D$)((t=>F.scrollIntoView(`item-${s+1}-${e+1}`)),["prevent"])},[(0,i.Lk)("span",null,(0,o.v_)(t),1)],8,d)])))),128))])))),128))]),(0,i.Lk)("div",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(X.flowerType,((t,s)=>((0,i.uX)(),(0,i.CE)("div",{key:t+s},[(0,i.Lk)("h4",{style:{"padding-top":"56px","margin-top":"-56px"},id:`item-${s+1}`},(0,o.v_)(Object.keys(t)[0]),9,p),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.values(t)[0],((t,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e},[(0,i.Lk)("h5",{style:{"padding-top":"56px","margin-top":"-56px"},id:`item-${s+1}-${e+1}`},(0,o.v_)(t),9,h),(0,i.Lk)("div",g,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(X.products,(s=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s.id},[s.category.includes(`${t}`)?((0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("div",k,[(0,i.Lk)("img",{src:s.imageUrl,class:"card-img-top",alt:"",style:{height:"200px","object-fit":"cover"}},null,8,m),(0,i.Lk)("div",C,[(0,i.Lk)("h5",f,(0,o.v_)(s.title),1),s.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",b,(0,o.v_)(s.origin_price)+" 元",1)),s.price?((0,i.uX)(),(0,i.CE)("del",y,"原價 "+(0,o.v_)(s.origin_price)+" 元",1)):(0,i.Q3)("",!0),s.price?((0,i.uX)(),(0,i.CE)("div",L,"現在只要 "+(0,o.v_)(s.price)+" 元",1)):(0,i.Q3)("",!0),(0,i.Lk)("div",$,[(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t=>F.getProduct(s.id)}," 查看更多 ",8,w),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===s.id,onClick:t=>F.addCart(s.id)},[this.status.loadingItem===s.id?((0,i.uX)(),(0,i.CE)("div",I,_)):(0,i.Q3)("",!0),(0,i.eW)(" 加到購物車 ")],8,x)])])])])):(0,i.Q3)("",!0)],64)))),128))])])))),128))])))),128))])])])],64)}e(4114);var F={data(){return{products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},coupon_code:"",isLoading:!1,flowerType:[{"鮮花花束":["浪漫玫瑰花束","繽紛混合花束"]},{"花藝設計":["婚禮花藝","企業花藝"]},{"盆栽與多肉植物":["綠色盆栽","迷你多肉植物"]}]}},inject:["$httpMessageState"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,console.log("products:",t),this.isLoading=!1}))},getProduct(t){this.$router.push(`/product/${t}`)},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,this.isLoading=!1}))},addCart(t){const s="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(s,{data:e}).then((t=>{this.status.loadingItem="",console.log(t),this.getCart()}))},updateCart(t){const s=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const e={product_id:t.product_id,qty:t.qty};this.$http.put(s,{data:e}).then((t=>{console.log(t),this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon",s={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:s}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},removeCartItem(t){this.status.loadingItem=t;const s=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(s).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))},createOrder(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/order",s=this.form;this.$http.post(t,{data:s}).then((t=>{console.log(t)}))},scrollIntoView(t){document.getElementById(t).scrollIntoView()}},created(){this.getProducts(),this.getCart()}},K=e(1241);const j=(0,K.A)(F,[["render",X]]);var O=j}}]);
//# sourceMappingURL=843.e09affa4.js.map