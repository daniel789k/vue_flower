(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[594],{1560:function(t,e,s){
/*!
  * Bootstrap toast.js v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,a){t.exports=a(s(6e3),s(1617),s(4755),s(1752))})(0,(function(t,e,s,a){"use strict";const o="toast",n="bs.toast",i=`.${n}`,c=`mouseover${i}`,l=`mouseout${i}`,r=`focusin${i}`,u=`focusout${i}`,d=`hide${i}`,h=`hidden${i}`,p=`show${i}`,g=`shown${i}`,f="fade",v="hide",m="show",b="showing",k={animation:"boolean",autohide:"boolean",delay:"number"},L={animation:!0,autohide:!0,delay:5e3};class _ extends t{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return L}static get DefaultType(){return k}static get NAME(){return o}show(){const t=e.trigger(this._element,p);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(f);const s=()=>{this._element.classList.remove(b),e.trigger(this._element,g),this._maybeScheduleHide()};this._element.classList.remove(v),a.reflow(this._element),this._element.classList.add(m,b),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=e.trigger(this._element,d);if(t.defaultPrevented)return;const s=()=>{this._element.classList.add(v),this._element.classList.remove(b,m),e.trigger(this._element,h)};this._element.classList.add(b),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(m),super.dispose()}isShown(){return this._element.classList.contains(m)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){e.on(this._element,c,(t=>this._onInteraction(t,!0))),e.on(this._element,l,(t=>this._onInteraction(t,!1))),e.on(this._element,r,(t=>this._onInteraction(t,!0))),e.on(this._element,u,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=_.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return s.enableDismissTrigger(_),a.defineJQueryPlugin(_),_}))},7901:function(t,e,s){"use strict";s.d(e,{A:function(){return n}});s(4114);function a(t){return{all:t=t||new Map,on:function(e,s){var a=t.get(e);a?a.push(s):t.set(e,[s])},off:function(e,s){var a=t.get(e);a&&(s?a.splice(a.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var a=t.get(e);a&&a.slice().map((function(t){t(s)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,s)}))}}}const o=a();var n=o},5368:function(t,e,s){"use strict";s.d(e,{A:function(){return o}});var a=s(7901);function o(t,e="更新"){if(t.data.success)a.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;a.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}}},1416:function(t,e,s){"use strict";s.d(e,{A:function(){return d}});var a=s(6768);const o={class:"footer bg-secondary py-4"},n=(0,a.Lk)("p",{class:"text-white text-center mb-0"},"Copyright © 2021 花之藝.All rights reserved.",-1),i=[n];function c(t,e){return(0,a.uX)(),(0,a.CE)("footer",o,i)}var l=s(1241);const r={},u=(0,l.A)(r,[["render",c]]);var d=u},9551:function(t,e,s){"use strict";s.d(e,{A:function(){return _}});var a=s(6768);const o={class:"toast-container position-absolute pe-3 top-0 end-0"};function n(t,e,s,n,i,c){const l=(0,a.g2)("Toast");return(0,a.uX)(),(0,a.CE)("div",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.messages,((t,e)=>((0,a.uX)(),(0,a.Wv)(l,{key:e,msg:t},null,8,["msg"])))),128))])}s(4114);var i=s(4232);const c={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast"},l={class:"toast-header"},r={class:"me-auto"},u=(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),d={key:0,class:"toast-body"};function h(t,e,s,o,n,h){return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",l,[(0,a.Lk)("span",{class:(0,i.C4)([`bg-${s.msg.style}`,"p-2 rounded me-2 d-inline-block"])},null,2),(0,a.Lk)("strong",r,(0,i.v_)(s.msg.title),1),u]),s.msg.content?((0,a.uX)(),(0,a.CE)("div",d,(0,i.v_)(s.msg.content),1)):(0,a.Q3)("",!0)],512)}var p=s(1560),g=s.n(p),f={name:"UserToast",props:["msg"],mounted(){const t=this.$refs.toast,e=new(g())(t,{delay:6e3});e.show()}},v=s(1241);const m=(0,v.A)(f,[["render",h]]);var b=m,k={components:{Toast:b},data(){return{messages:[]}},inject:["emitter"],mounted(){this.emitter.on("push-message",(t=>{const{style:e="success",title:s,content:a}=t;this.messages.push({style:e,title:s,content:a})}))}};const L=(0,v.A)(k,[["render",n]]);var _=L},603:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=s(6768);const o={class:"about"},n=(0,a.Lk)("h1",null,"This is an about page",-1),i=[n];function c(t,e){return(0,a.uX)(),(0,a.CE)("div",o,i)}var l=s(1241);const r={},u=(0,l.A)(r,[["render",c]]);var d=u},499:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return J}});var a=s(6768);function o(t,e,s,o,n,i){const c=(0,a.g2)("NavBar"),l=(0,a.g2)("ToastMessages"),r=(0,a.g2)("router-view"),u=(0,a.g2)("FooTer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(c),(0,a.Lk)("div",null,[(0,a.bF)(l),(0,a.bF)(r)]),(0,a.bF)(u)],64)}s(4114);var n=s(5130),i=s(4232),c=s(3420);const l={class:"navbar navbar-expand-lg navbar-light sticky-top bg-navBack"},r={class:"container"},u=(0,a.Lk)("a",{class:"navbar-brand",href:"#"},[(0,a.Lk)("img",{src:c,alt:"logo",width:"30",height:"30"}),(0,a.eW)(" 花之藝")],-1),d=(0,a.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a.Lk)("span",{class:"navbar-toggler-icon"})],-1),h={class:"collapse navbar-collapse",id:"navbarSupportedContent"},p={class:"navbar-nav ms-auto"},g={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},f=(0,a.Lk)("div",{class:"offcanvas-header"},[(0,a.Lk)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Offcanvas"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),v={class:"offcanvas-body"},m={class:"table align-middle"},b=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th"),(0,a.Lk)("th",null,"品名"),(0,a.Lk)("th",{style:{width:"120px"}},"數量"),(0,a.Lk)("th",null,"單價")])],-1),k=["disabled","onClick"],L=(0,a.Lk)("i",{class:"bi bi-x"},null,-1),_=[L],y={key:0,class:"text-success"},C={class:"input-group input-group-sm"},x=["disabled","onChange","onUpdate:modelValue"],$={class:"input-group-text"},w={class:"text-end"},A={key:0,class:"text-success"},I=(0,a.Lk)("td",{colspan:"3",class:"text-end"},"總計",-1),E={class:"text-end"},F={key:0},M=(0,a.Lk)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),S={class:"text-end text-success"},T={class:"input-group mb-3 input-group-sm"},W={class:"input-group-append"},X={class:"text-end"};function D(t,e,s,o,c,L){const D=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("nav",l,[(0,a.Lk)("div",r,[u,d,(0,a.Lk)("div",h,[(0,a.Lk)("div",p,[(0,a.bF)(D,{to:"/back/products",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("產品編輯")])),_:1}),(0,a.bF)(D,{to:"/back/orders",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("訂單")])),_:1}),(0,a.bF)(D,{to:"/back/coupons",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("優惠券")])),_:1}),(0,a.Lk)("a",{href:"#",onClick:e[0]||(e[0]=(0,n.D$)(((...t)=>L.logout&&L.logout(...t)),["prevent"])),class:"nav-link"},"登出"),(0,a.bF)(D,{to:"/",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("前台")])),_:1})])])])]),(0,a.Lk)("div",g,[f,(0,a.Lk)("div",v,[(0,a.Lk)("table",m,[b,(0,a.Lk)("tbody",null,[c.cart.carts?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(c.cart.carts,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:c.status.loadingItem===e.id,onClick:t=>L.removeCartItem(e.id)},_,8,k)]),(0,a.Lk)("td",null,[(0,a.eW)((0,i.v_)(e.product.title)+" ",1),e.coupon?((0,a.uX)(),(0,a.CE)("div",y," 已套用優惠券 ")):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",C,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",min:"1",disabled:e.id===c.status.loadingItem,onChange:t=>L.updateCart(e),"onUpdate:modelValue":t=>e.qty=t},null,40,x),[[n.Jo,e.qty,void 0,{number:!0}]]),(0,a.Lk)("div",$,"/ "+(0,i.v_)(e.product.unit),1)])]),(0,a.Lk)("td",w,[c.cart.final_total!==c.cart.total?((0,a.uX)(),(0,a.CE)("small",A,"折扣價：")):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(t.$filters.currency(e.final_total)),1)])])))),128)):(0,a.Q3)("",!0)]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[I,(0,a.Lk)("td",E,(0,i.v_)(t.$filters.currency(c.cart.total)),1)]),c.cart.final_total!==c.cart.total?((0,a.uX)(),(0,a.CE)("tr",F,[M,(0,a.Lk)("td",S,(0,i.v_)(t.$filters.currency(c.cart.final_total)),1)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>c.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[n.Jo,c.coupon_code]]),(0,a.Lk)("div",W,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=(...t)=>L.addCouponCode&&L.addCouponCode(...t))}," 套用優惠碼 ")])]),(0,a.Lk)("div",X,[(0,a.bF)(D,{class:"btn btn-danger",to:"/checkform"},{default:(0,a.k6)((()=>[(0,a.eW)("前往結帳")])),_:1})])])])],64)}var q=s(7901),B={data(){return{status:{loadingItem:""},cart:{},coupon_code:"",nowuse_coupon_code:""}},methods:{$httpMessageState(t,e="更新"){if(t.data.success)q.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;q.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}},logout(){const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&this.$router.push("/")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1,this.cart.carts[0].coupon&&(this.coupon_code=this.cart.carts[0].coupon.code)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon";let e={};""!==this.coupon_code?this.nowuse_coupon_code=this.coupon_code:this.coupon_code=this.nowuse_coupon_code,e={code:this.coupon_code},this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))}},created(){this.getCart()}},H=s(1241);const Q=(0,H.A)(B,[["render",D]]);var K=Q,V=s(1416),j=s(9551),U=s(5368),G={data(){return{picture:"https://images.unsplash.com/photo-1714139797690-969497e4a65e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}},components:{NavBar:K,FooTer:V.A,ToastMessages:j.A},provide(){return{emitter:q.A,$httpMessageState:U.A}},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(e,this.user).then((t=>{console.log(t),t.data.success||this.$router.push("login")}))}};const N=(0,H.A)(G,[["render",o]]);var J=N},7892:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return O}});var a=s(6768);const o={class:"bg-pageBack"};function n(t,e,s,n,i,c){const l=(0,a.g2)("NavBar"),r=(0,a.g2)("ToastMessages"),u=(0,a.g2)("router-view"),d=(0,a.g2)("FooTer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l),(0,a.Lk)("div",o,[(0,a.bF)(r),(0,a.bF)(u)]),(0,a.bF)(d)],64)}var i=s(5130),c=s(4232),l=s(3420);const r={class:"navbar navbar-expand-lg navbar-light sticky-top bg-navBack"},u={class:"container"},d=(0,a.Lk)("a",{class:"navbar-brand",href:"#"},[(0,a.Lk)("img",{src:l,alt:"logo",width:"30",height:"30"}),(0,a.eW)(" 花之藝")],-1),h=(0,a.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a.Lk)("span",{class:"navbar-toggler-icon"})],-1),p={class:"collapse navbar-collapse",id:"navbarSupportedContent"},g={class:"navbar-nav ms-auto"},f={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel",style:{"background-image":"url(https://images.unsplash.com/photo-1553142282-bcc4d3ec4c40?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-repeat":"no-repeat","background-size":"cover"}},v=(0,a.Lk)("div",{class:"offcanvas-header"},[(0,a.Lk)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"購物車"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),m={class:"offcanvas-body"},b={class:"table align-middle"},k=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th"),(0,a.Lk)("th",null,"品名"),(0,a.Lk)("th",{style:{width:"120px"}},"數量"),(0,a.Lk)("th",null,"單價")])],-1),L=["disabled","onClick"],_=(0,a.Lk)("i",{class:"bi bi-x"},null,-1),y=[_],C={key:0,class:"text-success"},x={class:"input-group input-group-sm"},$=["disabled","onChange","onUpdate:modelValue"],w={class:"input-group-text"},A={class:"text-end"},I={key:0,class:"text-success"},E=(0,a.Lk)("td",{colspan:"3",class:"text-end"},"總計",-1),F={class:"text-end"},M={key:0},S=(0,a.Lk)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),T={class:"text-end text-success"},W={class:"input-group mb-3 input-group-sm"},X={class:"input-group-append"},D={class:"text-end"},q=(0,a.Lk)("button",{class:"btn btn-danger","aria-label":"Close","data-bs-dismiss":"offcanvas"},"前往結帳",-1);function B(t,e,s,o,n,l){const _=(0,a.g2)("UserLoading"),B=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{active:n.isLoading},null,8,["active"]),(0,a.Lk)("nav",r,[(0,a.Lk)("div",u,[d,h,(0,a.Lk)("div",p,[(0,a.Lk)("div",g,[(0,a.bF)(B,{to:"/",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("首頁")])),_:1}),(0,a.bF)(B,{to:"/products",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("產品")])),_:1}),(0,a.bF)(B,{to:"/orders",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("歷史訂單")])),_:1}),(0,a.Lk)("button",{class:"nav-link","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample",onClick:e[0]||(e[0]=(0,i.D$)((t=>(l.getCart(),l.addCouponCode())),["prevent"]))},"購物車"),0===this.loginStatus?((0,a.uX)(),(0,a.Wv)(B,{key:0,to:"/user/login",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("訪客登入")])),_:1})):((0,a.uX)(),(0,a.Wv)(B,{key:1,onClick:(0,i.D$)(l.logout,["prevent"]),to:"/",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("訪客登出")])),_:1},8,["onClick"])),(0,a.bF)(B,{to:"/login",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("後台")])),_:1})])])])]),(0,a.Lk)("div",f,[v,(0,a.Lk)("div",m,[(0,a.Lk)("table",b,[k,(0,a.Lk)("tbody",null,[n.cart.carts?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.cart.carts,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:n.status.loadingItem===e.id,onClick:t=>l.removeCartItem(e.id)},y,8,L)]),(0,a.Lk)("td",null,[(0,a.eW)((0,c.v_)(e.product.title)+" ",1),e.coupon?((0,a.uX)(),(0,a.CE)("div",C," 已套用優惠券 ")):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",x,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",min:"1",disabled:e.id===n.status.loadingItem,onChange:t=>l.updateCart(e),"onUpdate:modelValue":t=>e.qty=t},null,40,$),[[i.Jo,e.qty,void 0,{number:!0}]]),(0,a.Lk)("div",w,"/ "+(0,c.v_)(e.product.unit),1)])]),(0,a.Lk)("td",A,[n.cart.final_total!==n.cart.total?((0,a.uX)(),(0,a.CE)("small",I,"折扣價：")):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,c.v_)(t.$filters.currency(e.final_total)),1)])])))),128)):(0,a.Q3)("",!0)]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[E,(0,a.Lk)("td",F,(0,c.v_)(t.$filters.currency(n.cart.total)),1)]),n.cart.final_total!==n.cart.total?((0,a.uX)(),(0,a.CE)("tr",M,[S,(0,a.Lk)("td",T,(0,c.v_)(t.$filters.currency(n.cart.final_total)),1)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>n.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[i.Jo,n.coupon_code]]),(0,a.Lk)("div",X,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=(...t)=>l.addCouponCode&&l.addCouponCode(...t))}," 套用優惠碼 ")])]),(0,a.Lk)("div",D,[(0,a.bF)(B,{to:"/checkform"},{default:(0,a.k6)((()=>[q])),_:1})])])])],64)}s(4114);var H=s(7901),Q={data(){return{status:{loadingItem:""},cart:{},coupon_code:"",nowuse_coupon_code:"",loginStatus:0,isLoading:!1}},methods:{$httpMessageState(t,e="更新"){if(t.data.success)H.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;H.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}},logout(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&(this.isLoading=!1,this.loginStatus=0,this.$httpMessageState(t,"登出"),this.$router.push("/"))}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1,0!==this.cart.carts.length&&""===this.coupon_code&&"code"in this.cart.carts[0]&&(this.coupon_code=this.cart.carts[0].coupon.code)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon";let e={};0===this.cart.carts.length&&(this.coupon_code="",this.nowuse_coupon_code=""),""!==this.coupon_code?this.nowuse_coupon_code=this.coupon_code:this.coupon_code=this.nowuse_coupon_code,e={code:this.coupon_code},this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.coupon_code&&(console.log(t),this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1)}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))},comfirmLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(e,this.user).then((t=>{console.log(t),t.data.success?this.loginStatus=1:this.loginStatus=0}))}},created(){this.getCart()},updated(){this.comfirmLogin()}},K=s(1241);const V=(0,K.A)(Q,[["render",B]]);var j=V,U=s(1416),G=s(9551),N=s(5368),J={data(){return{picture:"https://images.unsplash.com/photo-1714139797690-969497e4a65e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}},provide(){return{emitter:H.A,$httpMessageState:N.A}},components:{NavBar:j,FooTer:U.A,ToastMessages:G.A}};const z=(0,K.A)(J,[["render",n]]);var O=z},3420:function(t,e,s){"use strict";t.exports=s.p+"img/flowerart-favicon-color.ece37f41.svg"}}]);
//# sourceMappingURL=about.56ff9646.js.map