"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[675],{7649:function(t,e,i){i.d(e,{J:function(){return o}});var s=i(5615);const o=(0,s.nY)("buyCount",{state:()=>({buyCount:0}),getters:{getbuyCount:({buyCount:t})=>t},actions:{setbuyCount(t){this.buyCount=t}}})},6675:function(t,e,i){i.r(e),i.d(e,{default:function(){return A}});var s=i(641),o=i(33),c=i(3751);const r={class:"container px-5"},a={"aria-label":"breadcrumb"},n={class:"breadcrumb pt-3"},u={class:"breadcrumb-item"},d={class:"breadcrumb-item active text-mainColor","aria-current":"page"},l={class:"row justify-content-center mb-5"},p={class:"col-4"},h=["src"],m={class:"col-8"},g={class:"mt-3"},k={key:0,class:"h5"},v={key:1,class:"h6 text-muted"},b={key:2,class:"h5 text-subColor1"},C=(0,s.Lk)("hr",null,null,-1),y={class:"input-group input-group-sm mb-2"},L=(0,s.Lk)("div",{class:"input-group-text"},"/ 朵",-1),f=(0,s.Lk)("h2",{class:"mb-3"},"推薦商品",-1),w={class:"card h-100"},_=["src","onClick"],x={class:"card-body bg-navBack d-flex flex-column justify-content-between"},$=["onClick"],X=["onClick"],E=["onClick"],P=["onClick"],q={class:"btn-group btn-group-sm"},I=["disabled","onClick"],Q={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},S=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),j=[S],F=(0,s.Lk)("div",{class:"py-3"},null,-1);function U(t,e,i,S,U,B){const J=(0,s.g2)("UserLoading"),K=(0,s.g2)("router-link"),V=(0,s.g2)("swiper-slide"),W=(0,s.g2)("swiper");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(J,{active:t.isLoading},null,8,["active"]),(0,s.Lk)("div",r,[(0,s.Lk)("nav",a,[(0,s.Lk)("ol",n,[(0,s.Lk)("li",u,[(0,s.bF)(K,{class:"text-secondary text-decoration-none",to:"/products"},{default:(0,s.k6)((()=>[(0,s.eW)("產品")])),_:1})]),(0,s.Lk)("li",d,(0,o.v_)(U.product.title),1)])]),(0,s.Lk)("div",l,[(0,s.Lk)("article",p,[(0,s.Lk)("img",{src:U.product.imageUrl,alt:"商品圖片",class:"img-fluid me-auto d-block",style:{height:"80%","object-fit":"cover"}},null,8,h)]),(0,s.Lk)("div",m,[(0,s.Lk)("h2",null,(0,o.v_)(U.product.title),1),(0,s.Lk)("div",null,(0,o.v_)(U.product.content),1),(0,s.Lk)("pre",g,(0,o.v_)(U.product.description),1),U.product.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",k,(0,o.v_)(U.product.origin_price)+" 元",1)),U.product.price?((0,s.uX)(),(0,s.CE)("del",v,"原價 "+(0,o.v_)(U.product.origin_price)+" 元",1)):(0,s.Q3)("",!0),U.product.price?((0,s.uX)(),(0,s.CE)("div",b,"現在只要 "+(0,o.v_)(U.product.price)+" 元",1)):(0,s.Q3)("",!0),C,(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control flex-grow-0 w-25 text-center",min:"1","onUpdate:modelValue":e[0]||(e[0]=t=>U.qty=t)},null,512),[[c.Jo,U.qty,void 0,{number:!0}]]),L,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",onClick:e[1]||(e[1]=t=>B.addToCart(U.product.id))}," 加到購物車 ")])])]),f,(0,s.bF)(W,{navigation:!0,slidesPerView:3,spaceBetween:50,pagination:{dynamicBullets:!0,clickable:!0},modules:S.modules,class:"mySwiper pb-4",style:{"--swiper-theme-color":"#564527"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(U.recommendP,(t=>((0,s.uX)(),(0,s.Wv)(V,{key:t.id},{default:(0,s.k6)((()=>[(0,s.Lk)("div",w,[(0,s.Lk)("img",{src:t.imageUrl,class:"card-img-top",alt:"商品圖片",onClick:e=>B.getrecommend(t.id),style:{height:"200px","object-fit":"cover"}},null,8,_),(0,s.Lk)("div",x,[(0,s.Lk)("h5",{class:"card-title",onClick:e=>B.getrecommend(t.id)},(0,o.v_)(t.title),9,$),t.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"h5",onClick:e=>B.getrecommend(t.id)},(0,o.v_)(t.origin_price)+" 元",9,X)),t.price?((0,s.uX)(),(0,s.CE)("del",{key:1,class:"h6 text-muted",onClick:e=>B.getrecommend(t.id)},"原價 "+(0,o.v_)(t.origin_price)+" 元",9,E)):(0,s.Q3)("",!0),t.price?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"h5 text-subColor1",onClick:e=>B.getrecommend(t.id)},"現在只要 "+(0,o.v_)(t.price)+" 元",9,P)):(0,s.Q3)("",!0),(0,s.Lk)("div",q,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:U.status.loadingItem===t.id,onClick:e=>B.addrecommend(t.id)},[U.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",Q,j)):(0,s.Q3)("",!0),(0,s.eW)(" 加到購物車 ")],8,I)])])])])),_:2},1024)))),128))])),_:1},8,["modules"]),F])],64)}i(4114);var B=i(434),J=i(4712),K=i(7649),V=i(5615),W={components:{Swiper:B.RC,SwiperSlide:B.qr},setup(){return{modules:[J.dK,J.Vx]}},data(){return{recommendP:{},product:{},id:"",status:{loadingItem:""},qty:1}},inject:["$httpMessageState"],methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.product=t.data.product)}))},getrecommend(t){this.id=t,this.$router.push(`/product/${t}`),this.getProduct()},getrecommendP(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.recommendP=t.data.products,this.isLoading=!1}))},addToCart(t,e=this.qty){const i="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart",s={product_id:t,qty:e};this.isLoading=!0,this.$http.post(i,{data:s}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.getCart(),this.$router.push("/products")}))},addrecommend(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(e,{data:i}).then((t=>{this.status.loadingItem="",this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,0!==this.cart.carts.length&&this.setbuyCount(this.cart.carts.map((t=>t.qty)).reduce(((t,e)=>t+e))),this.isLoading=!1}))}},computed:{...(0,V.aH)(K.J,["getbuyCount","setbuyCount"])},created(){this.id=this.$route.params.productId,this.getProduct(),this.getrecommendP()},updated(){window.scroll(0,0)}},M=i(6262);const T=(0,M.A)(W,[["render",U]]);var A=T}}]);
//# sourceMappingURL=675.364e4733.js.map