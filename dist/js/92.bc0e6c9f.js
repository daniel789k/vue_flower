"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[92],{7649:function(t,e,s){s.d(e,{J:function(){return o}});var i=s(5615);const o=(0,i.nY)("buyCount",{state:()=>({buyCount:0}),getters:{getbuyCount:({buyCount:t})=>t},actions:{setbuyCount(t){this.buyCount=t}}})},8775:function(t,e,s){s.d(e,{N:function(){return o}});s(4114);var i=s(5615);const o=(0,i.nY)("loveFlower",{state:()=>({loveF:[],loveTitle:[]}),getters:{getloveflower:({loveF:t})=>t,getTitle:({loveTitle:t})=>t},actions:{pushLoveFlower(t){const e=this.loveF.length;0===e?(this.loveF.push(t),this.loveTitle.push(t.title)):this.loveF.forEach(((s,i)=>{s.title===t.title?(this.loveF.splice(i,1),this.loveTitle.splice(i,1)):s.title!==t.title&&i===e-1&&(this.loveF.push(t),this.loveTitle.push(t.title))}))}}})},5092:function(t,e,s){s.r(e),s.d(e,{default:function(){return j}});var i=s(641),o=s(33);const a={class:"container pb-5",style:{"min-height":"calc(100vh - 72px - 57.6px)"}},l=(0,i.Lk)("h2",{class:"text-center py-md-5 pt-3 mb-0"},"花藝商品",-1),c={class:"row"},n={class:"bg-light flex-column align-items-stretch p-3 pt-0 col-md-3 sticky-top h-100 bg-pageBack d-none d-md-block",style:{top:"65px"}},r={class:"flex-md-column"},u={class:"list-group flex-column"},d={key:0,class:"bi bi-flower2"},h={class:"sticky-top bg-pageBack py-2 d-md-none",style:{top:"57px"}},p={class:"py-auto",style:{}},g={class:"hideScroll mb-0",style:{"white-space":"nowrap","overflow-x":"scroll"}},v={key:0,class:"bi bi-flower2"},y={"data-bs-spy":"scroll","data-bs-target":"#navbar-example3","data-bs-offset":"0",tabindex:"0",class:"col-md-9"},m={class:"row row-cols-2 row-cols-md-3 g-4"},C={key:0,class:"card h-100 position-relative border-0",style:{overflow:"hidden",cursor:"pointer"}},k=(0,i.Lk)("div",{class:"position-absolute top-0 start-100 bg-white",style:{width:"60px",height:"60px",transform:"translate(-50%,-50%) rotate(45deg)"}},null,-1),b=["onClick"],f=["onClick"],w=["src","onClick"],L={class:"card-body bg-navBack d-flex flex-column justify-content-between"},x=["onClick"],T=["onClick"],E=["onClick"],F=["onClick"],$={class:"btn-group btn-group-sm"},I=["disabled","onClick"],X={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},_=(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1),A=[_];function P(t,e,s,_,P,Q){const H=(0,i.g2)("UserLoading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(H,{active:P.isLoading},null,8,["active"]),(0,i.Lk)("section",a,[l,(0,i.Lk)("div",c,[(0,i.Lk)("div",n,[(0,i.Lk)("div",r,[(0,i.Lk)("ul",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.flowerType,((t,s)=>((0,i.uX)(),(0,i.CE)("li",{key:t+s,class:(0,o.C4)(["list-group-item ms-3 mb-2 btn btn-one",{active:t==P.activeType}]),onClick:e[0]||(e[0]=t=>Q.getType(t))},[t==P.activeType?((0,i.uX)(),(0,i.CE)("i",d)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,o.v_)(t),1)],2)))),128))])])]),(0,i.Lk)("div",h,[(0,i.Lk)("div",p,[(0,i.Lk)("ul",g,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.flowerType,((t,s)=>((0,i.uX)(),(0,i.CE)("li",{key:t+s,class:(0,o.C4)(["my-1 btn btn-one me-3",{active:t==P.activeType}]),onClick:e[1]||(e[1]=t=>Q.getType(t))},[t==P.activeType?((0,i.uX)(),(0,i.CE)("i",v)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,o.v_)(t),1)],2)))),128))])])]),(0,i.Lk)("div",y,[(0,i.Lk)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.products,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"col mb-2",key:e.id},[e.category.includes(`${P.nowType}`)?((0,i.uX)(),(0,i.CE)("div",C,[k,t.getTitle.includes(e.title)?((0,i.uX)(),(0,i.CE)("i",{key:0,class:"bi bi-heart-fill text-danger position-absolute",style:{top:"2px",right:"5px",cursor:"pointer"},onClick:s=>(Q.changeHeart(s),t.pushLoveFlower(e))},null,8,b)):((0,i.uX)(),(0,i.CE)("i",{key:1,class:"bi bi-heart position-absolute",style:{top:"2px",right:"5px",cursor:"pointer"},onClick:s=>(Q.changeHeart(s),t.pushLoveFlower(e))},null,8,f)),(0,i.Lk)("img",{src:e.imageUrl,class:"card-img-top",alt:"商品圖片",onClick:t=>Q.getProduct(e.id),style:{height:"200px","object-fit":"cover"}},null,8,w),(0,i.Lk)("div",L,[(0,i.Lk)("h5",{class:"card-title",onClick:t=>Q.getProduct(e.id)},(0,o.v_)(e.title),9,x),e.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,class:"h5",onClick:t=>Q.getProduct(e.id)},(0,o.v_)(e.origin_price)+" 元",9,T)),e.price!==e.origin_price?((0,i.uX)(),(0,i.CE)("del",{key:1,class:"h6 text-muted",onClick:t=>Q.getProduct(e.id)},"NT$ "+(0,o.v_)(e.origin_price),9,E)):(0,i.Q3)("",!0),e.price?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"h5",onClick:t=>Q.getProduct(e.id)},"NT$ "+(0,o.v_)(e.price)+" 元",9,F)):(0,i.Q3)("",!0),(0,i.Lk)("div",$,[(0,i.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:P.status.loadingItem===e.id,onClick:t=>Q.addCart(e.id)},[P.status.loadingItem===e.id?((0,i.uX)(),(0,i.CE)("div",X,A)):(0,i.Q3)("",!0),(0,i.eW)(" 加到購物車 ")],8,I)])])])):(0,i.Q3)("",!0)])))),128))])])])])],64)}s(4114);var Q=s(7483),H=s(8775),q=s(7649),B=s(5615),K={data(){return{products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},coupon_code:"",isLoading:!1,flowerType:["全部商品","浪漫玫瑰花束","繽紛混合花束","婚禮花藝","企業花藝","綠色盆栽","迷你多肉植物"],nowType:"",activeType:"全部商品",loveFlower:[]}},inject:["$httpMessageState"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"取得產品失敗"})}))},getProduct(t){this.$router.push(`/product/${t}`)},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,0!==this.cart.carts.length&&this.setbuyCount(this.cart.carts.map((t=>t.qty)).reduce(((t,e)=>t+e))),this.isLoading=!1})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"取得購物車失敗"})}))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"添加購物車失敗"})}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"更新購物車失敗"})}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"添加優惠券失敗"})}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"刪除品項失敗"})}))},createOrder(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{})).catch((t=>{t.data.success||Q.A.emit("push-message",{style:"danger",title:"建立訂單失敗"})}))},scrollIntoView(t){document.getElementById(t).scrollIntoView()},getType(t){!1===t.target.classList.contains("active")&&(this.nowType=t.target.innerText,this.activeType=t.target.innerText),"全部商品"===t.target.innerText&&(this.nowType="")},changeHeart:t=>{t.target.classList.toggle("bi-heart"),t.target.classList.toggle("bi-heart-fill"),t.target.classList.toggle("text-danger")}},computed:{...(0,B.aH)(H.N,["pushLoveFlower","getloveflower","getTitle"]),...(0,B.aH)(q.J,["getbuyCount","setbuyCount"])},created(){this.getProducts(),this.getCart()}},N=s(6262);const S=(0,N.A)(K,[["render",P]]);var j=S}}]);
//# sourceMappingURL=92.bc0e6c9f.js.map