"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[221],{6221:function(t,e,s){s.r(e),s.d(e,{default:function(){return S}});var l=s(641),r=s(3751),n=s(33);const d={class:"container-fluid"},u={class:"container-fluid p-3"},o={class:"row"},a=(0,l.Fv)('<div class="col d-flex flex-column flex-md-row justify-content-center align-items-center px-1 px-md-0"><button type="button" class="btn bg-success text-white btn-sm rounded-pill" style="width:2rem;height:2rem;"> 1 </button><p class="ms-md-2 my-2 my-md-auto text-success text-nowrap">訂購資料</p></div><span class="bg-success w-25 rounded my-auto mx-0 mx-md-3 col" style="height:0.2rem;"></span><div class="col d-flex flex-column flex-md-row justify-content-center align-items-center px-1 px-md-0"><button type="button" class="btn bg-success text-white btn-sm rounded-pill" style="width:2rem;height:2rem;"> 2 </button><p class="ms-md-2 my-2 my-md-auto text-success text-nowrap">確認付款</p></div>',3),c={key:0,class:"bg-white w-25 rounded my-auto mx-0 mx-md-3 col",style:{height:"0.2rem"}},i={key:1,class:"bg-success w-25 rounded my-auto mx-0 mx-md-3 col",style:{height:"0.2rem"}},m={class:"col d-flex flex-column flex-md-row justify-content-center align-items-center px-1 px-md-0"},p={key:0,type:"button",class:"btn bg-white text-black btn-sm rounded-pill",style:{width:"2rem",height:"2rem"}},h={key:1,type:"button",class:"btn bg-success text-white btn-sm rounded-pill",style:{width:"2rem",height:"2rem"}},k={key:2,class:"ms-md-2 my-2 my-md-auto text-black text-nowrap"},y={key:3,class:"ms-md-2 my-2 my-md-auto text-success text-nowrap"},b={class:"py-5 row justify-content-center container mx-auto"},x={class:"table align-middle"},L=(0,l.Lk)("thead",null,[(0,l.Lk)("th",null,"品名"),(0,l.Lk)("th",null,"數量"),(0,l.Lk)("th",null,"單價")],-1),v={class:"text-end"},f=(0,l.Lk)("td",{colspan:"2",class:"text-end"},"總計",-1),w={class:"text-end"},g={class:"table"},_=(0,l.Lk)("th",{width:"100"},"Email",-1),C=(0,l.Lk)("th",null,"姓名",-1),E=(0,l.Lk)("th",null,"收件人電話",-1),X=(0,l.Lk)("th",null,"收件人地址",-1),I=(0,l.Lk)("th",null,"付款狀態",-1),O={key:0},$={key:1,class:"text-success"},j={key:0,class:"text-end"},F=(0,l.Lk)("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),K=[F];function q(t,e,s,F,q,A){const D=(0,l.g2)("Loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(D,{active:q.isLoading},null,8,["active"]),(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[(0,l.Lk)("div",o,[a,q.order.is_paid?((0,l.uX)(),(0,l.CE)("span",i)):((0,l.uX)(),(0,l.CE)("span",c)),(0,l.Lk)("div",m,[q.order.is_paid?((0,l.uX)(),(0,l.CE)("button",h," 3 ")):((0,l.uX)(),(0,l.CE)("button",p," 3 ")),q.order.is_paid?((0,l.uX)(),(0,l.CE)("p",y,"完成訂單")):((0,l.uX)(),(0,l.CE)("p",k,"完成訂單"))])])])]),(0,l.Lk)("div",b,[(0,l.Lk)("form",{class:"col-md-6",onSubmit:e[0]||(e[0]=(0,r.D$)(((...t)=>A.payOrder&&A.payOrder(...t)),["prevent"]))},[(0,l.Lk)("table",x,[L,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(q.order.products,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,n.v_)(t.product.title),1),(0,l.Lk)("td",null,(0,n.v_)(t.qty)+"/"+(0,n.v_)(t.product.unit),1),(0,l.Lk)("td",v,(0,n.v_)(t.final_total),1)])))),128))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[f,(0,l.Lk)("td",w,(0,n.v_)(q.order.total),1)])])]),(0,l.Lk)("table",g,[(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[_,(0,l.Lk)("td",null,(0,n.v_)(q.order.user.email),1)]),(0,l.Lk)("tr",null,[C,(0,l.Lk)("td",null,(0,n.v_)(q.order.user.name),1)]),(0,l.Lk)("tr",null,[E,(0,l.Lk)("td",null,(0,n.v_)(q.order.user.tel),1)]),(0,l.Lk)("tr",null,[X,(0,l.Lk)("td",null,(0,n.v_)(q.order.user.address),1)]),(0,l.Lk)("tr",null,[I,(0,l.Lk)("td",null,[q.order.is_paid?((0,l.uX)(),(0,l.CE)("span",$,"付款完成")):((0,l.uX)(),(0,l.CE)("span",O,"尚未付款"))])])])]),!1===q.order.is_paid?((0,l.uX)(),(0,l.CE)("div",j,K)):(0,l.Q3)("",!0)],32)])],64)}var A={data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/order/${this.orderId}`;this.$http.get(t).then((t=>{t.data.success&&(this.order=t.data.order)}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/pay/${this.orderId}`;this.$http.post(t).then((t=>{t.data.success&&this.getOrder()}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},D=s(6262);const Q=(0,D.A)(A,[["render",q]]);var S=Q}}]);
//# sourceMappingURL=221.8ac88350.js.map