{"version":3,"file":"js/675.364e4733.js","mappings":"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","sources":["webpack://vue_flower/./src/stores/cartStore.js","webpack://vue_flower/./src/views/frontend/UserProductDetail.vue","webpack://vue_flower/./src/views/frontend/UserProductDetail.vue?6a02"],"sourcesContent":["import { defineStore } from 'pinia'\r\n\r\nexport const buyCountStore = defineStore('buyCount', {\r\n  state: () => ({\r\n    buyCount: 0\r\n  }),\r\n  getters: {\r\n    getbuyCount: ({ buyCount }) => {\r\n      return buyCount\r\n    }\r\n  },\r\n  actions: {\r\n    setbuyCount (count) {\r\n      this.buyCount = count\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <UserLoading :active=\"isLoading\"/>\r\n  <div class=\"container px-5\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb pt-3\">\r\n        <li class=\"breadcrumb-item\"><router-link class=\"text-secondary text-decoration-none\" to=\"/products\">產品</router-link></li>\r\n        <li class=\"breadcrumb-item active text-mainColor\" aria-current=\"page\">{{ product.title }}</li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"row justify-content-center mb-5\">\r\n      <article class=\"col-4\">\r\n        <img :src=\"product.imageUrl\" alt=\"商品圖片\" class=\"img-fluid me-auto d-block\" style=\"height: 80%; object-fit: cover;\">\r\n      </article>\r\n      <div class=\"col-8\">\r\n        <h2>{{ product.title }}</h2>\r\n        <div>{{ product.content }}</div>\r\n        <pre class=\"mt-3\">{{ product.description }}</pre>\r\n        <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\r\n        <del class=\"h6 text-muted\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\r\n        <div class=\"h5 text-subColor1\" v-if=\"product.price\">現在只要 {{ product.price }} 元</div>\r\n        <hr>\r\n        <div class=\"input-group input-group-sm mb-2\">\r\n          <input type=\"number\" class=\"form-control flex-grow-0 w-25 text-center\"\r\n          min=\"1\" v-model.number=\"qty\">\r\n          <div class=\"input-group-text\">/ 朵</div>\r\n          <button type=\"button\" class=\"btn btn-outline-mainColor\"\r\n          @click=\"addToCart(product.id)\">\r\n            加到購物車\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <h2 class=\"mb-3\">推薦商品</h2>\r\n    <swiper\r\n      :navigation=\"true\"\r\n      :slidesPerView=\"3\"\r\n      :spaceBetween=\"50\"\r\n      :pagination=\"{\r\n        dynamicBullets: true,\r\n        clickable: true,\r\n      }\"\r\n      :modules=\"modules\"\r\n      class=\"mySwiper pb-4\"\r\n      style=\"--swiper-theme-color: #564527;\"\r\n    >\r\n      <template v-for=\"item in recommendP\" :key=\"item.id\">\r\n        <swiper-slide>\r\n          <div class=\"card h-100\">\r\n            <img :src=item.imageUrl class=\"card-img-top\" alt=\"商品圖片\"\r\n            @click=\"getrecommend(item.id)\" style=\"height: 200px; object-fit: cover;\">\r\n            <div class=\"card-body bg-navBack d-flex flex-column justify-content-between\">\r\n              <h5 class=\"card-title\" @click=\"getrecommend(item.id)\">{{ item.title }}</h5>\r\n              <div class=\"h5\" @click=\"getrecommend(item.id)\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\r\n              <del class=\"h6 text-muted\" @click=\"getrecommend(item.id)\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\r\n              <div class=\"h5 text-subColor1\" @click=\"getrecommend(item.id)\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\r\n\r\n              <div class=\"btn-group btn-group-sm\">\r\n                <!-- <button type=\"button\" class=\"btn btn-outline-secondary\">\r\n                  查看更多\r\n                </button> -->\r\n                <button type=\"button\" class=\"btn btn-outline-mainColor\"\r\n                :disabled=\"status.loadingItem === item.id\"\r\n                @click=\"addrecommend(item.id)\">\r\n                <div v-if=\"status.loadingItem === item.id\" class=\"spinner-grow text-mainColor spinner-grow-sm\" role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                  加到購物車\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </swiper-slide>\r\n      </template>\r\n    </swiper>\r\n    <div class=\"py-3\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Swiper, SwiperSlide } from 'swiper/vue'\r\nimport 'swiper/css'\r\nimport 'swiper/css/pagination'\r\nimport 'swiper/css/navigation'\r\nimport { Pagination, Navigation } from 'swiper/modules'\r\nimport { buyCountStore } from '@/stores/cartStore'\r\nimport { mapState } from 'pinia'\r\nexport default {\r\n  components: {\r\n    Swiper,\r\n    SwiperSlide\r\n  },\r\n  setup () {\r\n    return {\r\n      modules: [Pagination, Navigation]\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      recommendP: {},\r\n      product: {},\r\n      id: '',\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      qty: 1\r\n    }\r\n  },\r\n  inject: ['$httpMessageState'],\r\n  methods: {\r\n    getProduct () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((response) => {\r\n        this.isLoading = false\r\n        if (response.data.success) {\r\n          this.product = response.data.product\r\n        }\r\n      })\r\n    },\r\n    getrecommend (id) {\r\n      this.id = id\r\n      this.$router.push(`/product/${id}`)\r\n      this.getProduct()\r\n    },\r\n    getrecommendP () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((response) => {\r\n        this.recommendP = response.data.products\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    addToCart (id, qty = this.qty) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.isLoading = true\r\n      this.$http.post(url, { data: cart }).then((response) => {\r\n        this.isLoading = false\r\n        this.$httpMessageState(response, '加入購物車')\r\n        this.getCart()\r\n        this.$router.push('/products')\r\n      })\r\n    },\r\n    addrecommend (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = ''\r\n        this.getCart()\r\n      })\r\n    },\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(url).then((response) => {\r\n        this.cart = response.data.data\r\n        if (this.cart.carts.length !== 0) {\r\n          this.setbuyCount(this.cart.carts.map(el => el.qty).reduce((a, b) => a + b))\r\n        }\r\n        this.isLoading = false\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(buyCountStore, ['getbuyCount', 'setbuyCount'])\r\n  },\r\n  created () {\r\n    this.id = this.$route.params.productId\r\n    this.getProduct()\r\n    this.getrecommendP()\r\n  },\r\n  updated () {\r\n    window.scroll(0, 0)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserProductDetail.vue?vue&type=template&id=24791060\"\nimport script from \"./UserProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["buyCountStore","defineStore","state","buyCount","getters","getbuyCount","actions","setbuyCount","count","this","class","key","_createElementVNode","role","_hoisted_28","_createElementBlock","_Fragment","_createVNode","_component_UserLoading","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_5","_toDisplayString","$data","product","title","_hoisted_6","_hoisted_7","src","imageUrl","alt","style","_hoisted_8","_hoisted_9","content","_hoisted_10","description","price","_createCommentVNode","_hoisted_11","origin_price","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","type","min","_cache","$event","qty","number","_hoisted_16","onClick","$options","addToCart","id","_hoisted_17","_component_swiper","navigation","slidesPerView","spaceBetween","pagination","modules","$setup","_renderList","recommendP","item","_createBlock","_component_swiper_slide","_hoisted_18","getrecommend","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","disabled","status","loadingItem","addrecommend","_hoisted_27","_hoisted_29","_hoisted_26","_hoisted_30","components","Swiper","SwiperSlide","setup","Pagination","Navigation","data","inject","methods","getProduct","api","$http","get","then","response","success","$router","push","getrecommendP","url","products","cart","product_id","post","$httpMessageState","getCart","res","carts","length","map","el","reduce","a","b","computed","mapState","created","$route","params","productId","updated","window","scroll","__exports__","render"],"sourceRoot":""}