"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[417],{5417:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});var s=i(641),o=i(33);const a={class:"container"},c={"aria-label":"breadcrumb"},r={class:"breadcrumb pt-3"},d={class:"breadcrumb-item"},l={class:"breadcrumb-item active","aria-current":"page"},n={class:"row justify-content-center"},u={class:"col-8"},p=["src"],h={class:"col-4"},g={class:"mt-3"},m={key:0,class:"h5"},v={key:1,class:"h6"},k={key:2,class:"h5"},b=(0,s.Lk)("hr",null,null,-1),L=(0,s.Lk)("h2",{class:"mb-3"},"推薦商品",-1),f={class:"card h-100"},C=["src"],_={class:"card-body"},w={class:"card-title"},y={key:0,class:"h5"},$={key:1,class:"h6"},x={key:2,class:"h5"},X={class:"btn-group btn-group-sm"},E=["onClick"],P=["disabled","onClick"],I={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},Q=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),S=[Q];function F(t,e,i,Q,F,j){const q=(0,s.g2)("UserLoading"),K=(0,s.g2)("router-link"),U=(0,s.g2)("swiper-slide"),W=(0,s.g2)("swiper");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(q,{active:t.isLoading},null,8,["active"]),(0,s.Lk)("div",a,[(0,s.Lk)("nav",c,[(0,s.Lk)("ol",r,[(0,s.Lk)("li",d,[(0,s.bF)(K,{to:"/products"},{default:(0,s.k6)((()=>[(0,s.eW)("產品")])),_:1})]),(0,s.Lk)("li",l,(0,o.v_)(F.product.title),1)])]),(0,s.Lk)("div",n,[(0,s.Lk)("article",u,[(0,s.Lk)("img",{src:F.product.imageUrl,alt:"商品圖片",class:"img-fluid mx-auto d-block",style:{height:"80%","object-fit":"cover"}},null,8,p)]),(0,s.Lk)("div",h,[(0,s.Lk)("h2",null,(0,o.v_)(F.product.title),1),(0,s.Lk)("div",null,(0,o.v_)(F.product.content),1),(0,s.Lk)("pre",g,(0,o.v_)(F.product.description),1),F.product.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",m,(0,o.v_)(F.product.origin_price)+" 元",1)),F.product.price?((0,s.uX)(),(0,s.CE)("del",v,"原價 "+(0,o.v_)(F.product.origin_price)+" 元",1)):(0,s.Q3)("",!0),F.product.price?((0,s.uX)(),(0,s.CE)("div",k,"現在只要 "+(0,o.v_)(F.product.price)+" 元",1)):(0,s.Q3)("",!0),b,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",onClick:e[0]||(e[0]=t=>j.addToCart(F.product.id))}," 加到購物車 ")])]),L,(0,s.bF)(W,{navigation:!0,slidesPerView:3,spaceBetween:50,pagination:{dynamicBullets:!0},modules:Q.modules,class:"mySwiper pb-4 px-5"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(F.recommendP,(t=>((0,s.uX)(),(0,s.Wv)(U,{key:t.id},{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.Lk)("img",{src:t.imageUrl,class:"card-img-top",alt:"商品圖片",style:{height:"200px","object-fit":"cover"}},null,8,C),(0,s.Lk)("div",_,[(0,s.Lk)("h5",w,(0,o.v_)(t.title),1),t.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",y,(0,o.v_)(t.origin_price)+" 元",1)),t.price?((0,s.uX)(),(0,s.CE)("del",$,"原價 "+(0,o.v_)(t.origin_price)+" 元",1)):(0,s.Q3)("",!0),t.price?((0,s.uX)(),(0,s.CE)("div",x,"現在只要 "+(0,o.v_)(t.price)+" 元",1)):(0,s.Q3)("",!0),(0,s.Lk)("div",X,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e=>j.getrecommend(t.id)}," 查看更多 ",8,E),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:F.status.loadingItem===t.id,onClick:e=>j.addrecommend(t.id)},[F.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",I,S)):(0,s.Q3)("",!0),(0,s.eW)(" 加到購物車 ")],8,P)])])])])),_:2},1024)))),128))])),_:1},8,["modules"])])],64)}i(4114);var j=i(434),q=i(4712),K={components:{Swiper:j.RC,SwiperSlide:j.qr},setup(){return{modules:[q.dK,q.Vx]}},data(){return{recommendP:{},product:{},id:"",status:{loadingItem:""}}},inject:["$httpMessageState"],methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.product=t.data.product)}))},getrecommend(t){this.id=t,this.$router.push(`/product/${t}`),this.getProduct()},getrecommendP(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.recommendP=t.data.products,this.isLoading=!1}))},addToCart(t,e=1){const i="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart",s={product_id:t,qty:e};this.isLoading=!0,this.$http.post(i,{data:s}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.$router.push("/products")}))},addrecommend(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(e,{data:i}).then((t=>{this.status.loadingItem="",this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1}))}},created(){this.id=this.$route.params.productId,this.getProduct(),this.getrecommendP()},updated(){window.scroll(0,0)}},U=i(6262);const W=(0,U.A)(K,[["render",F]]);var B=W}}]);
//# sourceMappingURL=417.dc73cde6.js.map