"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[475],{8775:function(t,e,s){s.d(e,{N:function(){return i}});s(4114);var o=s(5615);const i=(0,o.nY)("loveFlower",{state:()=>({loveF:[],loveTitle:[]}),getters:{getloveflower:({loveF:t})=>t,getTitle:({loveTitle:t})=>t},actions:{pushLoveFlower(t){const e=this.loveF.length;0===e?(this.loveF.push(t),this.loveTitle.push(t.title)):this.loveF.forEach(((s,o)=>{s.title===t.title?(this.loveF.splice(o,1),this.loveTitle.splice(o,1)):s.title!==t.title&&o===e-1&&(this.loveF.push(t),this.loveTitle.push(t.title))}))}}})},8475:function(t,e,s){s.r(e),s.d(e,{default:function(){return Q}});var o=s(641),i=s(33);const a={class:"row"},l={key:0,class:"mb-4"},r={key:1,class:"mb-4"},n=(0,o.Lk)("i",{class:"bi bi-flower2 me-1"},null,-1),c={"data-bs-spy":"scroll","data-bs-target":"#navbar-example3","data-bs-offset":"0",tabindex:"0",class:"col-md-12"},h={class:"row row-cols-2 row-cols-md-4 g-4 mb-2"},d={class:"card h-100 position-relative border-0",style:{overflow:"hidden"}},u=(0,o.Lk)("div",{class:"position-absolute top-0 start-100 bg-white",style:{width:"60px",height:"60px",transform:"translate(-50%,-50%) rotate(45deg)"}},null,-1),p=["onClick"],g=["src"],v={class:"card-body bg-pageBack d-flex flex-column justify-content-between"},f={class:"card-title"},b={key:0,class:"h5"},k={key:1,class:"h6"},m={key:2,class:"h5"},L={class:"btn-group btn-group-sm"},w=["onClick"],C=["disabled","onClick"],y={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},x=(0,o.Lk)("span",{class:"visually-hidden"},"Loading...",-1),$=[x];function F(t,e,s,x,F,_){const I=(0,o.g2)("UserLoading"),E=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(I,{active:F.isLoading},null,8,["active"]),(0,o.Lk)("section",{class:(0,i.C4)(["container pb-5 pt-md-5",{noLove:0==t.getloveflower.length}])},[(0,o.Lk)("div",a,[0!==t.getloveflower.length?((0,o.uX)(),(0,o.CE)("h2",l,"我的最愛")):(0,o.Q3)("",!0),0==t.getloveflower.length?((0,o.uX)(),(0,o.CE)("h2",r,"尚無商品")):(0,o.Q3)("",!0),0==t.getloveflower.length?((0,o.uX)(),(0,o.Wv)(E,{key:2,to:"/products",class:"nav-link ps-3 fs-5"},{default:(0,o.k6)((()=>[n,(0,o.eW)("前往選購")])),_:1})):(0,o.Q3)("",!0),(0,o.Lk)("div",c,[(0,o.Lk)("div",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.getloveflower,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"col mb-2"},[(0,o.Lk)("div",d,[u,(0,o.Lk)("i",{class:"bi bi-heart-fill text-danger position-absolute",style:{top:"2px",right:"5px",cursor:"pointer"},onClick:s=>(_.changeHeart(s),t.pushLoveFlower(e))},null,8,p),(0,o.Lk)("img",{src:e.imageUrl,class:"card-img-top",alt:"最愛商品圖片",style:{height:"200px","object-fit":"cover"}},null,8,g),(0,o.Lk)("div",v,[(0,o.Lk)("h5",f,(0,i.v_)(e.title),1),e.price?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",b,(0,i.v_)(e.origin_price)+" 元",1)),e.price!==e.origin_price?((0,o.uX)(),(0,o.CE)("del",k,"NT$ "+(0,i.v_)(e.origin_price),1)):(0,o.Q3)("",!0),e.price?((0,o.uX)(),(0,o.CE)("div",m,"NT$ "+(0,i.v_)(e.price)+" 元",1)):(0,o.Q3)("",!0),(0,o.Lk)("div",L,[(0,o.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t=>_.getProduct(e.id)}," 查看更多 ",8,w),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:F.status.loadingItem===e.id,onClick:t=>_.addCart(e.id)},[F.status.loadingItem===e.id?((0,o.uX)(),(0,o.CE)("div",y,$)):(0,o.Q3)("",!0),(0,o.eW)(" 加到購物車 ")],8,C)])])])])))),128))])])])],2)],64)}s(4114);var _=s(8775),I=s(5615),E={data(){return{products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},coupon_code:"",isLoading:!1,flowerType:[{"鮮花花束":["浪漫玫瑰花束","繽紛混合花束"]},{"花藝設計":["婚禮花藝","企業花藝"]},{"盆栽與多肉植物":["綠色盆栽","迷你多肉植物"]}],loveF:[]}},inject:["emitter","$httpMessageState"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1}))},getProduct(t){this.$router.push(`/product/${t}`)},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1}))},addCart(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))},createOrder(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{}))},changeHeart:t=>{t.target.classList.toggle("bi-heart"),t.target.classList.toggle("bi-heart-fill"),t.target.classList.toggle("text-danger")}},computed:{...(0,I.aH)(_.N,["pushLoveFlower","getloveflower"])},created(){this.getProducts(),this.getCart()}},X=s(6262);const T=(0,X.A)(E,[["render",F]]);var Q=T}}]);
//# sourceMappingURL=475.a5814189.js.map