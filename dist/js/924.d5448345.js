"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[924],{7649:function(t,e,i){i.d(e,{J:function(){return o}});var s=i(5615);const o=(0,s.nY)("buyCount",{state:()=>({buyCount:0}),getters:{getbuyCount:({buyCount:t})=>t},actions:{setbuyCount(t){this.buyCount=t}}})},9924:function(t,e,i){i.r(e),i.d(e,{default:function(){return it}});var s=i(641),o=i(33),c=i(3751);const n={class:"container px-5"},l={"aria-label":"breadcrumb"},d={class:"breadcrumb pt-3"},r={class:"breadcrumb-item"},a={class:"breadcrumb-item active text-mainColor","aria-current":"page"},u={class:"row justify-content-center mb-5"},p={class:"col-12 col-lg-4 d-flex align-items-center align-items-lg-start"},m=["src"],h={class:"col-12 col-lg-8"},g={class:"mt-3",style:{"overflow-x":"hidden"}},k={key:0,class:"h5"},v={key:1,class:"h6 text-muted"},b={key:2,class:"h5 text-subColor1"},C=(0,s.Lk)("hr",null,null,-1),y={class:"input-group input-group-sm mb-2"},L=(0,s.Lk)("div",{class:"input-group-text"},"/ 朵",-1),w=(0,s.Lk)("h2",{class:"mb-3"},"推薦商品",-1),f={class:"card h-100"},x=["src","onClick"],_={class:"card-body bg-navBack d-flex flex-column justify-content-between"},X=["onClick"],E=["onClick"],W=["onClick"],$=["onClick"],P={class:"btn-group btn-group-sm"},Q=["disabled","onClick"],I={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},q=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),j=[q],S={class:"card h-100"},B=["src","onClick"],F={class:"card-body bg-navBack d-flex flex-column justify-content-between"},U=["onClick"],K=["onClick"],V=["onClick"],J=["onClick"],M={class:"btn-group btn-group-sm"},T=["disabled","onClick"],z={key:0,class:"spinner-grow text-mainColor spinner-grow-sm",role:"status"},A=(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1),H=[A],R=(0,s.Lk)("div",{class:"py-3"},null,-1);function Y(t,e,i,q,A,Y){const D=(0,s.g2)("UserLoading"),G=(0,s.g2)("router-link"),N=(0,s.g2)("swiper-slide"),O=(0,s.g2)("swiper");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(D,{active:t.isLoading},null,8,["active"]),(0,s.Lk)("div",n,[(0,s.Lk)("nav",l,[(0,s.Lk)("ol",d,[(0,s.Lk)("li",r,[(0,s.bF)(G,{class:"text-secondary text-decoration-none",to:"/products"},{default:(0,s.k6)((()=>[(0,s.eW)("產品")])),_:1})]),(0,s.Lk)("li",a,(0,o.v_)(A.product.title),1)])]),(0,s.Lk)("div",u,[(0,s.Lk)("article",p,[(0,s.Lk)("img",{src:A.product.imageUrl,alt:"商品圖片",class:"img-fluid mx-auto ms-lg-0 d-block",style:{height:"80%","object-fit":"cover"}},null,8,m)]),(0,s.Lk)("div",h,[(0,s.Lk)("h2",null,(0,o.v_)(A.product.title),1),(0,s.Lk)("div",null,(0,o.v_)(A.product.content),1),(0,s.Lk)("pre",g,(0,o.v_)(A.product.description),1),A.product.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",k,(0,o.v_)(A.product.origin_price)+" 元",1)),A.product.price?((0,s.uX)(),(0,s.CE)("del",v,"原價 "+(0,o.v_)(A.product.origin_price)+" 元",1)):(0,s.Q3)("",!0),A.product.price?((0,s.uX)(),(0,s.CE)("div",b,"現在只要 "+(0,o.v_)(A.product.price)+" 元",1)):(0,s.Q3)("",!0),C,(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control flex-grow-0 w-25 text-center",min:"1","onUpdate:modelValue":e[0]||(e[0]=t=>A.qty=t)},null,512),[[c.Jo,A.qty,void 0,{number:!0}]]),L,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",onClick:e[1]||(e[1]=t=>Y.addToCart(A.product.id))}," 加到購物車 ")])])]),w,A.windowWidth>992?((0,s.uX)(),(0,s.Wv)(O,{key:0,navigation:!0,slidesPerView:3,spaceBetween:50,pagination:{dynamicBullets:!0,clickable:!0},modules:q.modules,class:"mySwiper pb-4",style:{"--swiper-theme-color":"#564527"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(A.recommendP,(t=>((0,s.uX)(),(0,s.Wv)(N,{key:t.id,class:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.Lk)("img",{src:t.imageUrl,class:"card-img-top",alt:"商品圖片",onClick:e=>Y.getrecommend(t.id),style:{height:"200px","object-fit":"cover"}},null,8,x),(0,s.Lk)("div",_,[(0,s.Lk)("h5",{class:"card-title",onClick:e=>Y.getrecommend(t.id)},(0,o.v_)(t.title),9,X),t.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"h5",onClick:e=>Y.getrecommend(t.id)},(0,o.v_)(t.origin_price)+" 元",9,E)),t.price?((0,s.uX)(),(0,s.CE)("del",{key:1,class:"h6 text-muted",onClick:e=>Y.getrecommend(t.id)},"原價 "+(0,o.v_)(t.origin_price)+" 元",9,W)):(0,s.Q3)("",!0),t.price?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"h5 text-subColor1",onClick:e=>Y.getrecommend(t.id)},"現在只要 "+(0,o.v_)(t.price)+" 元",9,$)):(0,s.Q3)("",!0),(0,s.Lk)("div",P,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:A.status.loadingItem===t.id,onClick:e=>Y.addrecommend(t.id)},[A.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",I,j)):(0,s.Q3)("",!0),(0,s.eW)(" 加到購物車 ")],8,Q)])])])])),_:2},1024)))),128))])),_:1},8,["modules"])):((0,s.uX)(),(0,s.Wv)(O,{key:1,navigation:!0,slidesPerView:1,spaceBetween:50,pagination:{dynamicBullets:!0,clickable:!0},modules:q.modules,class:"mySwiper pb-4",style:{"--swiper-theme-color":"#564527"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(A.recommendP,(t=>((0,s.uX)(),(0,s.Wv)(N,{key:t.id,class:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",S,[(0,s.Lk)("img",{src:t.imageUrl,class:"card-img-top",alt:"商品圖片",onClick:e=>Y.getrecommend(t.id),style:{height:"200px","object-fit":"cover"}},null,8,B),(0,s.Lk)("div",F,[(0,s.Lk)("h5",{class:"card-title",onClick:e=>Y.getrecommend(t.id)},(0,o.v_)(t.title),9,U),t.price?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"h5",onClick:e=>Y.getrecommend(t.id)},(0,o.v_)(t.origin_price)+" 元",9,K)),t.price?((0,s.uX)(),(0,s.CE)("del",{key:1,class:"h6 text-muted",onClick:e=>Y.getrecommend(t.id)},"原價 "+(0,o.v_)(t.origin_price)+" 元",9,V)):(0,s.Q3)("",!0),t.price?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"h5 text-subColor1",onClick:e=>Y.getrecommend(t.id)},"現在只要 "+(0,o.v_)(t.price)+" 元",9,J)):(0,s.Q3)("",!0),(0,s.Lk)("div",M,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-mainColor",disabled:A.status.loadingItem===t.id,onClick:e=>Y.addrecommend(t.id)},[A.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",z,H)):(0,s.Q3)("",!0),(0,s.eW)(" 加到購物車 ")],8,T)])])])])),_:2},1024)))),128))])),_:1},8,["modules"])),R])],64)}i(4114);var D=i(434),G=i(4712),N=i(7649),O=i(5615),Z={components:{Swiper:D.RC,SwiperSlide:D.qr},setup(){return{modules:[G.dK,G.Vx]}},data(){return{recommendP:{},product:{},id:"",status:{loadingItem:""},qty:1,windowWidth:window.innerWidth}},inject:["$httpMessageState"],methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.product=t.data.product)}))},getrecommend(t){this.id=t,this.$router.push(`/product/${t}`),this.getProduct()},getrecommendP(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.recommendP=t.data.products,this.isLoading=!1}))},addToCart(t,e=this.qty){const i="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart",s={product_id:t,qty:e};this.isLoading=!0,this.$http.post(i,{data:s}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.getCart(),this.$router.push("/products")}))},addrecommend(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(e,{data:i}).then((t=>{this.status.loadingItem="",this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,0!==this.cart.carts.length&&this.setbuyCount(this.cart.carts.map((t=>t.qty)).reduce(((t,e)=>t+e))),this.isLoading=!1}))}},computed:{...(0,O.aH)(N.J,["getbuyCount","setbuyCount"])},mounted(){window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth}))},created(){this.id=this.$route.params.productId,this.getProduct(),this.getrecommendP()},updated(){window.scroll(0,0)}},tt=i(6262);const et=(0,tt.A)(Z,[["render",Y]]);var it=et}}]);
//# sourceMappingURL=924.d5448345.js.map