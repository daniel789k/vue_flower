"use strict";(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[463],{6463:function(t,e,s){s.r(e),s.d(e,{default:function(){return B}});var i=s(641),o=s(33);const c={class:"container"},a={"aria-label":"breadcrumb"},r={class:"breadcrumb pt-3"},d={class:"breadcrumb-item"},l={class:"breadcrumb-item active","aria-current":"page"},n={class:"row justify-content-center"},u={class:"col-8"},p=["src"],h={class:"col-4"},g={class:"mt-3"},m={key:0,class:"h5"},v={key:1,class:"h6"},k={key:2,class:"h5"},b=(0,i.Lk)("hr",null,null,-1),L=(0,i.Lk)("h2",{class:"mb-3"},"推薦商品",-1),f={class:"card h-100"},_=["src"],w={class:"card-body"},y={class:"card-title"},C={key:0,class:"h5"},$={key:1,class:"h6"},x={key:2,class:"h5"},X={class:"btn-group btn-group-sm"},E=["onClick"],P=["disabled","onClick"],I={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},Q=(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1),S=[Q];function F(t,e,s,Q,F,j){const q=(0,i.g2)("UserLoading"),K=(0,i.g2)("router-link"),U=(0,i.g2)("swiper-slide"),W=(0,i.g2)("swiper");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(q,{active:t.isLoading},null,8,["active"]),(0,i.Lk)("div",c,[(0,i.Lk)("nav",a,[(0,i.Lk)("ol",r,[(0,i.Lk)("li",d,[(0,i.bF)(K,{to:"/products"},{default:(0,i.k6)((()=>[(0,i.eW)("產品")])),_:1})]),(0,i.Lk)("li",l,(0,o.v_)(F.product.title),1)])]),(0,i.Lk)("div",n,[(0,i.Lk)("article",u,[(0,i.Lk)("img",{src:F.product.imageUrl,alt:"",class:"img-fluid mx-auto d-block",style:{height:"80%","object-fit":"cover"}},null,8,p)]),(0,i.Lk)("div",h,[(0,i.Lk)("h2",null,(0,o.v_)(F.product.title),1),(0,i.Lk)("div",null,(0,o.v_)(F.product.content),1),(0,i.Lk)("pre",g,(0,o.v_)(F.product.description),1),F.product.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",m,(0,o.v_)(F.product.origin_price)+" 元",1)),F.product.price?((0,i.uX)(),(0,i.CE)("del",v,"原價 "+(0,o.v_)(F.product.origin_price)+" 元",1)):(0,i.Q3)("",!0),F.product.price?((0,i.uX)(),(0,i.CE)("div",k,"現在只要 "+(0,o.v_)(F.product.price)+" 元",1)):(0,i.Q3)("",!0),b,(0,i.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:e[0]||(e[0]=t=>j.addToCart(F.product.id))}," 加到購物車 ")])]),L,(0,i.bF)(W,{navigation:!0,slidesPerView:3,spaceBetween:50,pagination:{dynamicBullets:!0},modules:Q.modules,class:"mySwiper pb-4 px-5"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(F.recommendP,(t=>((0,i.uX)(),(0,i.Wv)(U,{key:t.id},{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[(0,i.Lk)("img",{src:t.imageUrl,class:"card-img-top",alt:"",style:{height:"200px","object-fit":"cover"}},null,8,_),(0,i.Lk)("div",w,[(0,i.Lk)("h5",y,(0,o.v_)(t.title),1),t.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",C,(0,o.v_)(t.origin_price)+" 元",1)),t.price?((0,i.uX)(),(0,i.CE)("del",$,"原價 "+(0,o.v_)(t.origin_price)+" 元",1)):(0,i.Q3)("",!0),t.price?((0,i.uX)(),(0,i.CE)("div",x,"現在只要 "+(0,o.v_)(t.price)+" 元",1)):(0,i.Q3)("",!0),(0,i.Lk)("div",X,[(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e=>j.getrecommend(t.id)}," 查看更多 ",8,E),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===t.id,onClick:e=>j.addrecommend(t.id)},[this.status.loadingItem===t.id?((0,i.uX)(),(0,i.CE)("div",I,S)):(0,i.Q3)("",!0),(0,i.eW)(" 加到購物車 ")],8,P)])])])])),_:2},1024)))),128))])),_:1},8,["modules"])])],64)}s(4114);var j=s(434),q=s(4712),K={components:{Swiper:j.RC,SwiperSlide:j.qr},setup(){return{modules:[q.dK,q.Vx]}},data(){return{recommendP:{},product:{},id:"",status:{loadingItem:""}}},inject:["$httpMessageState"],methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/vue-final-flower/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t.data),this.isLoading=!1,t.data.success&&(this.product=t.data.product)}))},getrecommend(t){this.id=t,this.$router.push(`/product/${t}`),this.getProduct()},getrecommendP(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.recommendP=t.data.products,console.log("products:",t),this.isLoading=!1}))},addToCart(t,e=1){const s="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart",i={product_id:t,qty:e};this.isLoading=!0,this.$http.post(s,{data:i}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.$router.push("/products")}))},addrecommend(t){const e="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.status.loadingItem="",console.log(t),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,this.isLoading=!1}))}},created(){this.id=this.$route.params.productId,this.getProduct(),this.getrecommendP()},updated(){window.scroll(0,0)}},U=s(6262);const W=(0,U.A)(K,[["render",F]]);var B=W}}]);
//# sourceMappingURL=463.49ddb6a1.js.map