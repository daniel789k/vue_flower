(self["webpackChunkvue_flower"]=self["webpackChunkvue_flower"]||[]).push([[594],{653:function(t,e,s){
/*!
  * Bootstrap toast.js v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,a){t.exports=a(s(9011),s(7956),s(8248),s(4035))})(0,(function(t,e,s,a){"use strict";const o="toast",n="bs.toast",i=`.${n}`,r=`mouseover${i}`,c=`mouseout${i}`,l=`focusin${i}`,u=`focusout${i}`,d=`hide${i}`,h=`hidden${i}`,p=`show${i}`,g=`shown${i}`,m="fade",f="hide",v="show",b="showing",k={animation:"boolean",autohide:"boolean",delay:"number"},L={animation:!0,autohide:!0,delay:5e3};class _ extends t{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return L}static get DefaultType(){return k}static get NAME(){return o}show(){const t=e.trigger(this._element,p);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(m);const s=()=>{this._element.classList.remove(b),e.trigger(this._element,g),this._maybeScheduleHide()};this._element.classList.remove(f),a.reflow(this._element),this._element.classList.add(v,b),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=e.trigger(this._element,d);if(t.defaultPrevented)return;const s=()=>{this._element.classList.add(f),this._element.classList.remove(b,v),e.trigger(this._element,h)};this._element.classList.add(b),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(v),super.dispose()}isShown(){return this._element.classList.contains(v)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){e.on(this._element,r,(t=>this._onInteraction(t,!0))),e.on(this._element,c,(t=>this._onInteraction(t,!1))),e.on(this._element,l,(t=>this._onInteraction(t,!0))),e.on(this._element,u,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=_.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return s.enableDismissTrigger(_),a.defineJQueryPlugin(_),_}))},7483:function(t,e,s){"use strict";function a(t){return{all:t=t||new Map,on:function(e,s){var a=t.get(e);a?a.push(s):t.set(e,[s])},off:function(e,s){var a=t.get(e);a&&(s?a.splice(a.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var a=t.get(e);a&&a.slice().map((function(t){t(s)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,s)}))}}}s.d(e,{A:function(){return n}});const o=a();var n=o},5368:function(t,e,s){"use strict";s.d(e,{A:function(){return o}});var a=s(7483);function o(t,e="更新"){if(t.data.success)a.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;a.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}}},1416:function(t,e,s){"use strict";s.d(e,{A:function(){return d}});var a=s(641);const o={class:"footer bg-secondary py-4"},n=(0,a.Lk)("p",{class:"text-white text-center mb-0"},"Copyright © 2021 花之藝.All rights reserved.",-1),i=[n];function r(t,e){return(0,a.uX)(),(0,a.CE)("footer",o,i)}var c=s(6262);const l={},u=(0,c.A)(l,[["render",r]]);var d=u},9551:function(t,e,s){"use strict";s.d(e,{A:function(){return _}});var a=s(641);const o={class:"toast-container position-absolute pe-3 top-0 end-0"};function n(t,e,s,n,i,r){const c=(0,a.g2)("Toast");return(0,a.uX)(),(0,a.CE)("div",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.messages,((t,e)=>((0,a.uX)(),(0,a.Wv)(c,{key:e,msg:t},null,8,["msg"])))),128))])}s(4114);var i=s(33);const r={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast"},c={class:"toast-header"},l={class:"me-auto"},u=(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),d={key:0,class:"toast-body"};function h(t,e,s,o,n,h){return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",c,[(0,a.Lk)("span",{class:(0,i.C4)([`bg-${s.msg.style}`,"p-2 rounded me-2 d-inline-block"])},null,2),(0,a.Lk)("strong",l,(0,i.v_)(s.msg.title),1),u]),s.msg.content?((0,a.uX)(),(0,a.CE)("div",d,(0,i.v_)(s.msg.content),1)):(0,a.Q3)("",!0)],512)}var p=s(653),g=s.n(p),m={name:"UserToast",props:["msg"],mounted(){const t=this.$refs.toast,e=new(g())(t,{delay:6e3});e.show()}},f=s(6262);const v=(0,f.A)(m,[["render",h]]);var b=v,k={components:{Toast:b},data(){return{messages:[]}},inject:["emitter"],mounted(){this.emitter.on("push-message",(t=>{const{style:e="success",title:s,content:a}=t;this.messages.push({style:e,title:s,content:a})}))}};const L=(0,f.A)(k,[["render",n]]);var _=L},603:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return d}});var a=s(641);const o={class:"about"},n=(0,a.Lk)("h1",null,"This is an about page",-1),i=[n];function r(t,e){return(0,a.uX)(),(0,a.CE)("div",o,i)}var c=s(6262);const l={},u=(0,c.A)(l,[["render",r]]);var d=u},4826:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return C}});var a=s(641);function o(t,e,s,o,n,i){const r=(0,a.g2)("NavBar"),c=(0,a.g2)("ToastMessages"),l=(0,a.g2)("router-view"),u=(0,a.g2)("FooTer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(r),(0,a.Lk)("div",null,[(0,a.bF)(c),(0,a.bF)(l)]),(0,a.bF)(u)],64)}s(4114);var n=s(3751),i=s(3420);const r={class:"navbar navbar-expand-lg navbar-light sticky-top bg-navBack"},c={class:"container"},l=(0,a.Lk)("a",{class:"navbar-brand",href:"#"},[(0,a.Lk)("img",{src:i,alt:"logo",width:"30",height:"30"}),(0,a.eW)(" 花之藝")],-1),u=(0,a.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a.Lk)("span",{class:"navbar-toggler-icon"})],-1),d={class:"collapse navbar-collapse",id:"navbarSupportedContent"},h={class:"navbar-nav ms-auto"};function p(t,e,s,o,i,p){const g=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("nav",r,[(0,a.Lk)("div",c,[l,u,(0,a.Lk)("div",d,[(0,a.Lk)("div",h,[(0,a.bF)(g,{to:"/back/products",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("產品編輯")])),_:1}),(0,a.bF)(g,{to:"/back/orders",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("訂單")])),_:1}),(0,a.bF)(g,{to:"/back/coupons",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("優惠券")])),_:1}),(0,a.Lk)("a",{href:"#",onClick:e[0]||(e[0]=(0,n.D$)(((...t)=>p.logout&&p.logout(...t)),["prevent"])),class:"nav-link"},"登出"),(0,a.bF)(g,{to:"/",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("前台")])),_:1})])])])])}var g=s(7483),m={data(){return{status:{loadingItem:""},cart:{},coupon_code:"",nowuse_coupon_code:""}},methods:{$httpMessageState(t,e="更新"){if(t.data.success)g.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;g.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}},logout(){const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&this.$router.push("/")}))}}},f=s(6262);const v=(0,f.A)(m,[["render",p]]);var b=v,k=s(1416),L=s(9551),_=s(5368),y={data(){return{picture:"https://images.unsplash.com/photo-1714139797690-969497e4a65e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}},components:{NavBar:b,FooTer:k.A,ToastMessages:L.A},provide(){return{emitter:g.A,$httpMessageState:_.A}},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(e,this.user).then((t=>{console.log(t),t.data.success||this.$router.push("login")}))}};const x=(0,f.A)(y,[["render",o]]);var C=x},7551:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return ot}});var a=s(641);const o={class:"bg-pageBack"};function n(t,e,s,n,i,r){const c=(0,a.g2)("NavBar"),l=(0,a.g2)("ToastMessages"),u=(0,a.g2)("router-view"),d=(0,a.g2)("FooTer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(c),(0,a.Lk)("div",o,[(0,a.bF)(l),(0,a.bF)(u)]),(0,a.bF)(d)],64)}var i=s(3751),r=s(33),c=s(3420);const l={class:"navbar navbar-expand-lg navbar-light sticky-top bg-navBack"},u={class:"container"},d=(0,a.Lk)("a",{class:"navbar-brand",href:"#"},[(0,a.Lk)("img",{src:c,alt:"logo",width:"30",height:"30"}),(0,a.eW)(" 花之藝")],-1),h=(0,a.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a.Lk)("span",{class:"navbar-toggler-icon"})],-1),p={class:"collapse navbar-collapse",id:"navbarSupportedContent"},g={class:"navbar-nav ms-auto"},m=(0,a.Lk)("i",{class:"bi bi-flower2 me-1"},null,-1),f=(0,a.Lk)("p",{class:"text-start mb-0"},[(0,a.Lk)("i",{class:"bi bi-cart2 me-1"}),(0,a.eW)("購物車")],-1),v=[f],b=(0,a.Lk)("i",{class:"bi bi-heart me-1"},null,-1),k=(0,a.Lk)("i",{class:"bi bi-person me-1"},null,-1),L=(0,a.Lk)("i",{class:"bi bi-person"},null,-1),_={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel",style:{"background-image":"url(https://images.unsplash.com/photo-1553142282-bcc4d3ec4c40?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-repeat":"no-repeat","background-size":"cover",width:"530px"}},y=(0,a.Lk)("div",{class:"offcanvas-header"},[(0,a.Lk)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"購物車"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),x={class:"offcanvas-body"},C={class:"table align-middle"},w=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th"),(0,a.Lk)("th",{style:{width:"120px"}}),(0,a.Lk)("th",{style:{width:"120px"}},"品名"),(0,a.Lk)("th",{style:{width:"120px"}},"數量"),(0,a.Lk)("th",null,"單價")])],-1),$=["disabled","onClick"],A=(0,a.Lk)("i",{class:"bi bi-x"},null,-1),F=[A],S=["src"],T={key:0,class:"text-success"},I={class:"input-group input-group-sm"},M=["disabled","onChange","onUpdate:modelValue"],E={class:"input-group-text"},W={class:"text-end"},D={key:0,class:"text-success"},X=(0,a.Lk)("td",null,null,-1),B=(0,a.Lk)("td",{colspan:"3",class:"text-end"},"總計",-1),H={class:"text-end"},j={key:0},q=(0,a.Lk)("td",null,null,-1),K=(0,a.Lk)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),N={class:"text-end text-success"},Q={class:"input-group mb-3 input-group-sm w-50 ms-auto"},G={class:"input-group-append"},U={class:"text-end"},V=(0,a.Lk)("button",{class:"btn btn-danger","aria-label":"Close","data-bs-dismiss":"offcanvas"},"前往結帳",-1);function J(t,e,s,o,n,c){const f=(0,a.g2)("UserLoading"),A=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{active:n.isLoading},null,8,["active"]),(0,a.Lk)("nav",l,[(0,a.Lk)("div",u,[d,h,(0,a.Lk)("div",p,[(0,a.Lk)("div",g,[(0,a.bF)(A,{to:"/products",class:"nav-link"},{default:(0,a.k6)((()=>[m,(0,a.eW)("花藝商品")])),_:1}),(0,a.Lk)("button",{class:"nav-link","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample",onClick:e[0]||(e[0]=(0,i.D$)((t=>(c.getCart(),c.addCouponCode())),["prevent"]))},v),(0,a.Lk)("button",{onClick:e[1]||(e[1]=(0,i.D$)((t=>c.pushLove()),["prevent"])),class:"border-0 bg-transparent",style:{color:"rgba(0,0,0,0.65)"}},[b,(0,a.eW)("我的最愛")]),0===this.loginStatus?((0,a.uX)(),(0,a.Wv)(A,{key:0,to:"/user/login",class:"nav-link"},{default:(0,a.k6)((()=>[k,(0,a.eW)("會員登入")])),_:1})):((0,a.uX)(),(0,a.Wv)(A,{key:1,onClick:(0,i.D$)(c.logout,["prevent"]),to:"/",class:"nav-link"},{default:(0,a.k6)((()=>[L,(0,a.eW)("會員您好")])),_:1},8,["onClick"])),0!==this.loginStatus?((0,a.uX)(),(0,a.Wv)(A,{key:2,to:"/orders",class:"nav-link"},{default:(0,a.k6)((()=>[(0,a.eW)("訂單查詢")])),_:1})):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",_,[y,(0,a.Lk)("div",x,[(0,a.Lk)("table",C,[w,(0,a.Lk)("tbody",null,[n.cart.carts?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.cart.carts,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:n.status.loadingItem===e.id,onClick:t=>c.removeCartItem(e.id)},F,8,$)]),(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.product.imageUrl,alt:"",class:"img-fluid"},null,8,S)]),(0,a.Lk)("td",null,[(0,a.eW)((0,r.v_)(e.product.title)+" ",1),e.coupon?((0,a.uX)(),(0,a.CE)("div",T," 已套用優惠券 ")):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",min:"1",disabled:e.id===n.status.loadingItem,onChange:t=>c.updateCart(e),"onUpdate:modelValue":t=>e.qty=t},null,40,M),[[i.Jo,e.qty,void 0,{number:!0}]]),(0,a.Lk)("div",E,"/ "+(0,r.v_)(e.product.unit),1)])]),(0,a.Lk)("td",W,[n.cart.final_total!==n.cart.total?((0,a.uX)(),(0,a.CE)("small",D,"折扣價：")):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,r.v_)(t.$filters.currency(e.final_total)),1)])])))),128)):(0,a.Q3)("",!0)]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[X,B,(0,a.Lk)("td",H,(0,r.v_)(t.$filters.currency(n.cart.total)),1)]),n.cart.final_total!==n.cart.total?((0,a.uX)(),(0,a.CE)("tr",j,[q,K,(0,a.Lk)("td",N,(0,r.v_)(t.$filters.currency(n.cart.final_total)),1)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Q,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>n.coupon_code=t),placeholder:"請輸入優惠碼"},null,512),[[i.Jo,n.coupon_code]]),(0,a.Lk)("div",G,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=(...t)=>c.addCouponCode&&c.addCouponCode(...t))}," 套用優惠碼 ")])]),(0,a.Lk)("div",U,[(0,a.bF)(A,{to:"/checkform"},{default:(0,a.k6)((()=>[V])),_:1})])])])],64)}s(4114);var O=s(7483),z={data(){return{status:{loadingItem:""},cart:{},coupon_code:"",nowuse_coupon_code:"",loginStatus:0,isLoading:!1,loveFlower:[]}},inject:["emitter"],methods:{$httpMessageState(t,e="更新"){if(t.data.success)O.A.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;O.A.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join(",")})}},logout(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&(this.isLoading=!1,this.loginStatus=0,this.$httpMessageState(t,"登出"),this.$router.push("/"))}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1,0!==this.cart.carts.length&&""===this.coupon_code&&"code"in this.cart.carts[0].coupon&&(this.coupon_code=this.cart.carts[0].coupon.code)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/vue-final-flower/coupon";let e={};0===this.cart.carts.length&&(this.coupon_code="",this.nowuse_coupon_code=""),""!==this.coupon_code?this.nowuse_coupon_code=this.coupon_code:this.coupon_code=this.nowuse_coupon_code,e={code:this.coupon_code},this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.coupon_code&&(console.log(t),this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1)}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/vue-final-flower/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1}))},comfirmLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(e,this.user).then((t=>{t.data.success?this.loginStatus=1:this.loginStatus=0}))},pushLove(){this.$router.push("/loves"),this.emitter.emit("pushLoveFlower",this.loveFlower)}},created(){this.getCart(),this.emitter.on("getLoveFlower",(t=>{this.loveFlower=JSON.parse(JSON.stringify(t))}))},updated(){this.comfirmLogin()}},P=s(6262);const Y=(0,P.A)(z,[["render",J]]);var R=Y,Z=s(1416),tt=s(9551),et=s(5368),st={data(){return{picture:"https://images.unsplash.com/photo-1714139797690-969497e4a65e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}},provide(){return{emitter:O.A,$httpMessageState:et.A}},components:{NavBar:R,FooTer:Z.A,ToastMessages:tt.A}};const at=(0,P.A)(st,[["render",n]]);var ot=at},3420:function(t,e,s){"use strict";t.exports=s.p+"img/flowerart-favicon-color.ece37f41.svg"}}]);
//# sourceMappingURL=about.9ca87582.js.map